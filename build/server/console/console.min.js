var EBI={message:{type:{none:99,log:0,exception:1,script:2,result:3,requestHTML:4,sendHTML:5},origin:{unkown:99,client:0,server:1,console:2},last:0},html:{type:{none:99,textNode:0,tag:1}},createMessageObject:function(){return{id:this.message.last++,type:this.message.type.none,msg:"",origin:this.message.type.unkown,time:this.createTimeString(new Date)}},createTimeString:function(a){var b=a.getHours(),c=a.getMinutes(),d=a.getSeconds(),a=a.getMilliseconds();b<10&&(b="0"+b);c<10&&(c="0"+c);d<10&&(d="0"+
d);a<10&&(a="0"+a);a<100&&(a="0"+a);return b+":"+c+":"+d+"."+a}},ebiconsole={event:{},socket:null,message:{last:0},last:0,htmlModelObj:null};
ebiconsole.connect=function(a){this.socket=new io.Socket(a.host||"localhost",{port:a.port||8080,rememberTransport:!1});this.socket.connect();this.socket.on("connect",function(){});this.socket.on("message",function(a){ebiconsole.event.message(a)});this.socket.on("disconnect",function(){});$("runscript").addEventListener("click",function(){ebiconsole.runScript()});$("clearlogs").addEventListener("click",function(){ebiconsole.clearLog()});$("script").addEventListener("keyup",function(a){a.keyCode===
13&&$("checkReturnScript").checked&&ebiconsole.runScript()});this.socket.send(this.message.createRequestHTML());a=document.querySelector("article#html > section > details");document.querySelector("article#html > section > details > summary").addEventListener("click",function(a){return function(){a.getAttribute("open")?a.removeAttribute("open"):a.setAttribute("open","open")}}(a),!1)};ebiconsole.updateHTMLTag=function(){};
ebiconsole.selectNode=function(a){var a=a.split(","),b=1,c=a.length,d=this.htmlModelObj,g;if(c==1)return this.htmlModelObj;for(;b<c;b++)if(g=a[b],d.children.length>g)d=d.children[g];else return null;return d};
ebiconsole.event.message=function(a){a.mt=ebiconsole.message.createTimeString(new Date);ebiconsole.message.last=+a.last;a.type==EBI.message.type.log?ebiconsole.insertLog(a):a.type==EBI.message.type.result?ebiconsole.insertLog(a):a.type==EBI.message.type.exception?ebiconsole.insertLog(a):a.type==EBI.message.type.sendHTML&&ebiconsole.updateHTML(a)};ebiconsole.event.clickHTMLDetails=function(){};ebiconsole.message.createLog=function(a){var b=this.createBase();b.type="LOG";b.msg=a;return b};
ebiconsole.message.createRequestHTML=function(){var a=this.createBase();a.type="RHT";return a};ebiconsole.message.createBase=function(){return{id:this.last++,type:null,org:"c",msg:"base message",mt:this.createTimeString(new Date),st:null,ct:null}};ebiconsole.message.createTimeString=function(a){var b=a.getHours(),c=a.getMinutes(),d=a.getSeconds(),a=a.getMilliseconds();b<10&&(b="0"+b);c<10&&(c="0"+c);d<10&&(d="0"+d);a<10&&(a="0"+a);a<100&&(a="0"+a);return b+":"+c+":"+d+"."+a};var $=function(a){return document.getElementById(a)};
(function(){ebiconsole.connect({host:"localhost",port:8080})})();ebiconsole.updateHTML=function(a){this.registerHTML(a.msg,document.querySelector("article#html > section > details"))};
ebiconsole.registerHTML=function(a,b){for(var c=0,d=a.children,g=d.length;c<g;c++){var e=document.createElement("details"),f=document.createElement("summary");if(d[c].type==EBI.html.type.tag){for(var j="&lt;"+d[c].tag,i=d[c].attributes,h=0,k=i.length;h<k;h++)j+=" <span class='name'>"+i[h].name+"</span>=<span class='value'>\""+i[h].value+'"</span>';f.innerHTML=j+">";e.setAttribute("tag","tag");e.appendChild(f);b.appendChild(e);f.addEventListener("click",function(a){return function(){a.getAttribute("open")?
a.removeAttribute("open"):a.setAttribute("open","open")}}(e));this.registerHTML(d[c],e)}else e=document.createElement("details"),f=document.createElement("summary"),f.innerHTML="<span class='textnode'>"+d[c].value+"</span>",e.appendChild(f),b.appendChild(e)}};ebiconsole.toggleHTMLTag=function(a){a.getAttribute("open")?a.setAttribute("open","open"):a.removeAttribute("open")};
ebiconsole.insertLog=function(a){var b=$("message");a.type==ebi.message.type.log?b.innerHTML+="["+a.time+"] "+a.msg+"\n":a.type==EBI.message.type.script?b.innerHTML+="<span class='script'>>>"+a.msg+"</span>\n":a.type==EBI.message.type.result?b.innerHTML+="<span class='result'>>>"+a.msg+"</span>\n":a.type==EBI.message.type.exception&&(b.innerHTML+="<span class='exception'>>>"+a.msg+"</span>\n");b.scrollTop=1E8};ebiconsole.clearLog=function(){$("message").innerHTML=""};
ebiconsole.runScript=function(){var a=function(a){var c=EBI.createMessageObject();c.type=EBI.message.type.script;c.msg=a;c.origin=EBI.message.origin.console;return c}($("script").value.replace(/^(.*?)\n*$/,"$1"));this.socket.send(a);this.insertLog(a);if($("checkClearScript").checked)$("script").value=""};
